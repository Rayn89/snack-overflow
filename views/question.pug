extends layout.pug

block content
    h1 #{question.title}
    h3 #{question.content}
    h5 asked by: #{question.User.userName}
    h5 asked on: #{(question.updatedAt).toString().split(' ').slice(0,5).join(' ')}
    div
        if locals.authenticated
            if question.userId === locals.user.id
                form(action=`/questions/${question.id}/edit` method='get')
                    button Edit
                form(action=`/questions/${question.id}/delete` method='get')
                    button Delete
    div
        if answers
            each answer in answers
                div
                    p #{answer.content}
                    h5 answered by: #{answer.User.userName}
                    h5 posted on: #{answer.updatedAt.toString().split(' ').slice(0,5).join(' ')}
                if locals.authenticated
                    if answer.User.id === locals.user.id
                        form(action=`/answers/${answer.id}/edit`, method="get")
                            button Edit Answer
                        form(action=`/answers/${answer.id}/delete`, method="get")
                            button Delete Answer
        else
            p Be the first one to answer this question!
        if errors
            p The following errors occurred:
            ul
                each error in errors
                    li= error
        if locals.authenticated
            form(action='/answers' method='post')
                input(type='hidden' name='_csrf' value=csrfToken)
                input(type="hidden", name="questionId", value=question.id)
                input(type='hidden' name='userId' value=locals.user.id)
                input(type='hidden' name='answerScore' value=0)
                label(for='content') Answer:
                textarea(name='content')
                button Submit Answer
